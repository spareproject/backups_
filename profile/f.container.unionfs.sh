#!/bin/env bash
###############################################################################################################################################################################################################
umask 077
if [[ ${3} ]];then
###############################################################################################################################################################################################################
PROFILE="${1}"
PROFILE_="/mnt/profile/${PROFILE}"
OVERLAYFS="${PROFILE_}/internal/mount/${2}"
UNDERLAYFS="${PROFILE_}/internal/mount/${3}"
MOUNT="${PROFILE_}/internal/mount/${4}"
###############################################################################################################################################################################################################
unionfs -o allow_other,use_ino,suid,dev,nonempty -o cow ${OVERLAYFS}=RW:${UNDERLAYFS}=RO ${MOUNT}
###############################################################################################################################################################################################################
else
cat << EOF
takes profile overlayfs underlayfs and mount point...
name of directory in /mnt/profile/
EOF
fi
###############################################################################################################################################################################################################
